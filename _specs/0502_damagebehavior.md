---
title: ダメージ挙動
---

## 概要
* 攻撃を食らって無敵・アーマー等の割り込みイベントが発生しなかったときのふるまい

## 基本的な処理の流れ
1. しびれ
1. のけぞり
1. 復帰

## しびれ
* 直前の速度をキャンセルし、その場に磔になる
* 相手の方向に向き直る
    * 背面やられの場合は逆
### 設定可能なパラメータ
* ストップ秒数
    * 今回は0秒は禁止する
* モーションの種類
    * エフェクトの出し分け用

## のけぞり
* 各種のけぞり制御によって挙動が変わる
### 設定可能なパラメータ
* のけぞりの種類
* のけぞり秒数
* のけぞり強度
* 打ち上げ角度

### のけぞり方向の決定
のけぞり方向は以下の要素によって決定される。どれくらいの割合でブレンドするかは技に設定されたデータを参照する
* 攻撃側との位置関係
    * こちらの割合が高いと攻撃側から放射状にやられ側が飛ぶ
* 攻撃側が向いている方向
    * こちらの割合が高いと攻撃側が向いている方向にやられ側が飛ぶ

### のけぞり制御
#### その場よろけ(Stay)
* その場でよろけるモーションを取る
* 2つの`速度/時間`のカーブの間を強度パラメータで推移する
    * 打ち上げ角度に回転させる
* のけぞり秒数経過後終了
* 終了後復帰に移行しない
* 重力影響0
#### 斜め上吹き飛び(Diagonal)
* 後ろにのけぞるモーションを取る
* 2つの`速度/時間`のカーブの間を強度パラメータで推移する
    * 打ち上げ角度に回転させる
* のけぞり秒数経過後終了
* 重力影響0
#### 真後ろ吹き飛び(Horizontal)
* くの字に折れるモーションを取る
* 2つの`速度/時間`のカーブの間を強度パラメータで推移する
    * 打ち上げ角度に回転させる
* のけぞり秒数経過後終了
* 重力影響0
#### 真上吹き飛び(Vertical)
* 錐揉み回転のモーションを取る
* 2つの`速度/時間`のカーブの間を強度パラメータで推移する
    * 打ち上げ角度に回転させる
* のけぞり秒数経過後終了
* 重力影響0
#### ダウン(DownF)
* 斜め打ち上げ吹き飛びと同じモーションでスタート
* 速度が重力方向に移行したら後方宙返りのモーションを取る
* 打ち上げ角度に回転させた初速度で打ち出す
* 平面方向に常時ブレーキ
* 初速度・ブレーキは強度依存
* 常時重力がかかる
* 地面に接地すると終了
* 終了時は体勢を立て直すモーションを取ってから復帰に移行する
    * 復帰のモーション次第ではスキップ
#### 背面ダウン(DownB)
* 前方に転がるモーションを取る
* 打ち上げ角度に回転させた初速度で打ち出す
* のけぞり時間中は平面方向に継続速度をかける
* 平面方向に常時ブレーキ
* 常時重力がかかる
* のけぞり秒数経過後地面に接地すると終了
    * 先に接地した場合は地面を転がる
* 終了時は体勢を立て直すモーションを取ってから復帰に移行する
    * 復帰のモーション次第ではスキップ
#### バウンド(Bound)
* ダウンと同じモーションを取る
* 打ち上げ角度に回転させた初速度で打ち出す
* バウンドする前とのけぞり時間中は平面方向に継続速度をかける
* 平面方向に常時ブレーキ
* 常時重力がかかる
* 地面に接地するとバウンドする
* 以下のいずれかの条件を満たすと終了
    * バウンド後からのけぞり秒数経過
    * バウンド後にもう一度接地する
* 終了時は体勢を立て直すモーションを取ってから復帰に移行する
    * 復帰のモーション次第ではスキップ

## やられ復帰
* 固定時間の体勢を立て直すモーションを取る
* **復帰動作中は無敵**
* 復帰動作開始時にスティック入力していた方向へスライド移動する
    * 開閉による上下はなし
    * スティック入力がない場合はその場で
* 復帰動作後は着地していたら地上へ、それ以外は空中へ