---
title: ダメージ挙動
---

## 概要
* 攻撃を食らって無敵機・アーマー等の割り込みイベントが発生しなかったときのふるまい

## 基本的な処理の流れ
1. その場でしびれモーションを再生する
    * このとき攻撃側の方向に向き直る
1. 一定時間経過後のけぞりモーションを再生して吹き飛ばす
1. さらに一定時間経過後やられ状態から復活するモーションを再生する

## 設定可能なパラメータ
実行時に決定されるものと辞書から引いてくるものがある
* しびれ時間(DamageHitStopSec)
* のけぞり時間(DamageHitBackSec)
* のけぞり初速(DamageHitBackVel0)
* のけぞり維持速(DamageHitBackVel1)
* 向き直り方向(DamageFaceDir)
* のけぞり方向(DamageMoveDir)
* のけぞりの種類

## のけぞりの種類について
* その場よろけ
    * コンボ用
* 斜め上吹き飛び
    * 空中に飛んでいく
* 真後ろ吹き飛び
    * くの字に折れる
* 真上吹き飛び
    * 錐揉み回転
* ダウン
    * ぐるぐる回って地面に激突

## のけぞり方向の決定
のけぞり方向は以下の要素によって決定される。どれくらいの割合でブレンドするかは技に設定されたデータを参照する
* 攻撃側との位置関係
    * こちらの割合が高いと攻撃側から放射状にやられ側が飛ぶ
* 攻撃側が向いている方向
    * こちらの割合が高いと攻撃側が向いている方向にやられ側が飛ぶ

## ダメージ後の復帰について
* 固定時間の専用動作を設ける
    * その場よろけはなし
    * ダウンからの復帰は専用モーション
* 復帰動作中は無敵
* 復帰動作開始時にレバー入力していた方向へスライド移動する
    * 開閉による上下はなし
* 復帰動作後は着地していたら地上へ、それ以外は空中へ