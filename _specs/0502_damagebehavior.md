---
title: ダメージ挙動
---

## 概要
* 攻撃を食らって無敵・アーマー等の割り込みイベントが発生しなかったときのふるまい

## 基本的な処理の流れ
1. しびれ
1. のけぞり
1. 復帰

## しびれ
* 直前の速度をキャンセルし、その場に磔になる
* 相手の方向に向き直る
    * 背面やられの場合は逆
### 設定可能なパラメータ
* ストップ秒数
    * 今回は0秒は禁止する
* モーションの種類
    * エフェクトの出し分け用

## のけぞり
* 各種のけぞり制御によって挙動が変わる
### 設定可能なパラメータ
* のけぞりの種類
* のけぞり秒数
* 初速度
* 打ち上げ角度

### のけぞり方向の決定
のけぞり方向は以下の要素によって決定される。どれくらいの割合でブレンドするかは技に設定されたデータを参照する
* 攻撃側との位置関係
    * こちらの割合が高いと攻撃側から放射状にやられ側が飛ぶ
* 攻撃側が向いている方向
    * こちらの割合が高いと攻撃側が向いている方向にやられ側が飛ぶ

### のけぞり制御
#### その場よろけ
* その場でよろけるモーションを取る
* 初速度で打ち出しの固定のブレーキをかける
* のけぞり秒数経過後終了
* 終了後復帰に移行しない
* 重力影響が低くなる
#### 斜め上吹き飛び
* 後ろにのけぞるモーションを取る
* 打ち上げ角度に回転させた初速度で打ち出し固定のブレーキをかける
* のけぞり秒数経過後終了
* 重力影響が低くなる
#### 真後ろ吹き飛び
* くの字に折れるモーションを取る
* 初速度で打ち出しの固定のブレーキをかける
* のけぞり秒数経過後終了
* 重力影響が0
#### 真上吹き飛び
* 錐揉み回転のモーションを取る
* 打ち上げ角度に回転させた初速度で打ち出し固定のブレーキをかける
* のけぞり秒数経過後終了
* Y速度が下方向に変わったら重力の影響を0にする
#### ダウン
* 後方宙返りのモーションを取る
* 打ち上げ角度に回転させた初速度で打ち出し固定のブレーキをかける
* 地面に接地すると終了
* 終了時は体勢を立て直すモーションを取ってから復帰に移行する
    * 復帰のモーション次第ではスキップ
#### 背面ダウン
* ぐるぐるダウンの背面版
* 余裕があったらモーションを変える
#### バウンド
* ダウンと同じモーションを取る
* 打ち上げ角度に回転させた初速度で打ち出し固定のブレーキをかける
* 地面に接地するとバウンドする
* 以下のいずれかの条件を満たすと終了
    * バウンド後にのけぞり秒数経過
    * バウンド後にもう一度接地する
* 終了時は体勢を立て直すモーションを取ってから復帰に移行する
    * 復帰のモーション次第ではスキップ

## やられ復帰
* 固定時間の体勢を立て直すモーションを取る
* **復帰動作中は無敵**
* 復帰動作開始時にスティック入力していた方向へスライド移動する
    * 開閉による上下はなし
* 復帰動作後は着地していたら地上へ、それ以外は空中へ