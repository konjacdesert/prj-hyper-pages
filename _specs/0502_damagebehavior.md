---
title: ダメージ挙動
---

## 概要
* 攻撃を食らって無敵機・アーマー等の割り込みイベントが発生しなかったときのふるまい

## 基本的な処理の流れ
1. しびれ
1. のけぞり
1. 復帰

## しびれ
* 直前の速度をキャンセルし、その場に磔になる
* 相手の方向に向き直る
    * 背面やられの場合は逆
### 設定可能なパラメータ
* ストップ秒数
    * 今回は0秒は禁止する
* モーションの種類
    * エフェクトの出し分け用

## のけぞり
* 各種のけぞり制御によって挙動が変わる
* 相手の方向に向き直る
    * 背面やられの場合は逆
### 設定可能なパラメータ
* のけぞりの種類
* のけぞり秒数
* 初速度
* 終端速度
* 打ち上げ速度

### のけぞり方向の決定
のけぞり方向は以下の要素によって決定される。どれくらいの割合でブレンドするかは技に設定されたデータを参照する
* 攻撃側との位置関係
    * こちらの割合が高いと攻撃側から放射状にやられ側が飛ぶ
* 攻撃側が向いている方向
    * こちらの割合が高いと攻撃側が向いている方向にやられ側が飛ぶ

### のけぞり制御
#### その場よろけ
* その場でよろけるモーションを取る
* 初速度で打ち出しのけぞり秒数をかけて終端速度に変化させる
* 終了後復帰に移行しない
* 重力影響が低くなる
#### 斜め上吹き飛び
* 後ろにのけぞるモーションを取る
* 初速度で打ち出しのけぞり秒数をかけて終端速度に変化させる
* 重力影響が低くなる
#### 真後ろ吹き飛び
* くの字に折れるモーションを取る
* 初速度で打ち出しのけぞり秒数をかけて終端速度に変化させる
* 重力影響が0になる
#### 真上吹き飛び
* 錐揉み回転のモーションを取る
* 初速度で打ち出す
* Y速度が重力方向に変わったら終了し復帰モーションを取る
#### ぐるぐるダウン
* 後方宙返りのモーションを取る
* 初速度で打ち出す
* 接地時にバウンドできる速度を超えていたらバウンドする
* 以下のいづれかの条件を満たすとのけぞり終了
    * 接地時にバウンド条件を満たさなかった
    * のけぞり時間経過後に接地
    * のけぞり時間内に2回以上接地
* 終了時は体勢を立て直すモーションを取ってから復帰に移行する
    * 復帰のモーション次第ではスキップ
#### 背面ぐるぐるダウン
* ぐるぐるダウンの背面版
* 余裕があったらモーションを変える
#### 被撃墜
* モーションはぐるぐるダウンの流用か新規モーションか
* 初速度で打ち出す
* 地面に着いたらそのまま撃墜ステータスに移る
#### 背面被撃墜
* 被撃墜の背面版
* 余裕があったらモーションを変える

## やられ復帰
* 固定時間の体勢を立て直すモーションを取る
* **復帰動作中は無敵**
* 復帰動作開始時にレバー入力していた方向へスライド移動する
    * 開閉による上下はなし
* 復帰動作後は着地していたら地上へ、それ以外は空中へ