---
title: ダメージ挙動
---

## 概要
* 攻撃を食らって無敵機・アーマー等の割り込みイベントが発生しなかったときのふるまい

## 基本的な処理の流れ
1. その場でしびれモーションを再生する
    * このとき攻撃側の方向に向き直る
1. 一定時間経過後のけぞりモーションを再生して吹き飛ばす
1. さらに一定時間経過後やられ状態から復活するモーションを再生する

## 設定可能なパラメータ
実行時に決定されるものと辞書から引いてくるものがある
* しびれ時間(DamageHitStopSec)
* のけぞり時間(DamageHitBackSec)
* のけぞり初速(DamageHitBackVel0)
* のけぞり維持速(DamageHitBackVel1)
* 向き直り方向(DamageFaceDir)
* のけぞり方向(DamageMoveDir)
* その他フラグ
    * 背面ヒット
    * 下段ヒット
    * カウンターヒット

## ダメージモーションの決定
やられモーションは以下の要素によって決定される
* どの方向から攻撃されたか
    * 攻撃側との位置関係から前後を計算する
* どの高さを攻撃されたか
    * 技に設定されたデータを参照する

## のけぞり方向の決定
のけぞり方向は以下の要素によって決定される。どれくらいの割合でブレンドするかは技に設定されたデータを参照する
* 攻撃側との位置関係
    * こちらの割合が高いと攻撃側から放射状にやられ側が飛ぶ
* 攻撃側が向いている方向
    * こちらの割合が高いと攻撃側が向いている方向にやられ側が飛ぶ
